{"componentChunkName":"component---src-templates-post-template-jsx","path":"/posts/monotonic-queue-largest-rectangle/","result":{"data":{"site":{"siteMetadata":{"title":"Blog by Umar Farooq","subtitle":"A blog for professional curiosity (and sometimes personal curiosity).","copyright":"© All rights reserved.","author":{"name":"Umar Farooq","twitter":"#"},"disqusShortname":"","url":"http://umarfarooq.ca/"}},"markdownRemark":{"id":"cf5eb637-7672-514d-9a48-9d3907fe83ac","html":"<p>Bar graph algorithm questions are tricky; visually we can see the entire 2D view and make quick optimal decisions. But algorithmically it seems like there is a lot of traversing…?\nLet’s solve two such problems. </p>\n<h2><a href=\"https://leetcode.com/problems/trapping-rain-water/\">Trapping Rain Water</a></h2>\n<p><strong>Given a bar graph, how much water can it trap?</strong></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e837068182755a91a8e6e701b5fee2c/9e32a/trapping_rain_water.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 412px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 39.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABH0lEQVQY02N4//79ly9f/uMFf//+/fPnz79//9DEGZ4/f/7x48f/ZAGGp0+f4LEZYtvGjRt6enp+/PgBF0HY/PnzZ4jbgBJA/AcK/v75+/fnr99AqcDAQGZm5jdv3gDZv3/DpP/+ZXj27ClcM5B89OiRiaGub1x53tRT6Z0707t2FUw7pW7iysjAoK+r5R2ZmzfluKWDV0hQAMhmoGage4CmHjx44Nq9F5v2nGRgYBBTszGN6LZNX2STMs84tE1EwYABDIQUjE3COpi5hGWlJU+cPMnw8OFDoPumTZ8OlJOxzdYM6maAAU3/FmWXIhCLkZEBK3jz9s2HDx/OnDnb29uzZP2+FdtOTJ48eRIYLN9yfMmGAxMnTJgMAxBxOBsAjddS0B8FLXwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"A sample bar graph\"\n        title=\"\"\n        src=\"/static/2e837068182755a91a8e6e701b5fee2c/9e32a/trapping_rain_water.png\"\n        srcset=\"/static/2e837068182755a91a8e6e701b5fee2c/8ff5a/trapping_rain_water.png 240w,\n/static/2e837068182755a91a8e6e701b5fee2c/9e32a/trapping_rain_water.png 412w\"\n        sizes=\"(max-width: 412px) 100vw, 412px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Here we can trap 6 “units” of water.</p>\n<p><strong>Claim</strong>: For any <em>i</em>, the amount of water held at <em>i</em> is “bounded” by the minimum of the maximum heights on the left and on the right.</p>\n<p><strong>Proof</strong>: This image of a counter example should make it clear:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ffc5a74a3224356d054470963591c3c7/fa5c1/trapping_rain_water_counter_proof.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 422px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABTklEQVQY02N4//79//////37ByE/fvz49evX/0jg79+/v3//hihAAwxPnz6FqACSQJ1KSkoJiUlA9p8/f/4TAgzPnz+Ha3779i0jI6OHhyeQ/fv3n79/QbZdvHhx6tQpL168ACv7BwFQzTBRkOZ3794xM7N4eXlCbIZY3tXVycDAcOLECUznoNj85u07Xh5OZV2bmgXniyfvL560r2bBOaeQHKBmM1OTgNCYijmnozNrXZ0dHj95AtL88uXLX79+3blz5+WbD9fvPhHk5xGSM7BOnmOTttAuc5lV8hxF00BGBhBg4xGxSpkrpm4PZO/evQcY0gxfvnzZtWs3kK9sn2qevJCBkRmskkHNrcgsfiYDNsDExAQkLS0tGZ49e3by5Mn0tJTWiYsnLD5YUlpWWFhYkJ/bMW31hEV7gUwgtwgGgFwgUVxckpmZOXHiRAC+5j14JV3RDQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"counter example\"\n        title=\"\"\n        src=\"/static/ffc5a74a3224356d054470963591c3c7/fa5c1/trapping_rain_water_counter_proof.png\"\n        srcset=\"/static/ffc5a74a3224356d054470963591c3c7/8ff5a/trapping_rain_water_counter_proof.png 240w,\n/static/ffc5a74a3224356d054470963591c3c7/fa5c1/trapping_rain_water_counter_proof.png 422w\"\n        sizes=\"(max-width: 422px) 100vw, 422px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><strong>Algorithm</strong>: At each <em>i</em>, find the maximum to the left, find the maximum to the right, get the minimum of those 2. Then, subtract out the height of <em>i</em> (this is “ground level” at position <em>i</em>). This is the water that can be trapped at <em>i</em>. To find the total, we simply sum all the water trapped at each <em>i</em>.</p>\n<h2><a href=\"https://leetcode.com/problems/largest-rectangle-in-histogram/\">Largest Rectangle</a></h2>\n<p><strong>Given a bar graph, what is the largest rectangle that can be made?</strong></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dc4406bb965d19b27a416a4ad4c1bdbc/4dcb9/largest_rectangle.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 188px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 108.51063829787235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAACSklEQVQ4y42T626jMBCF8/7PtX+6WqmbqgmE4BsXYzuEUsAGk1J2bEfpSptuawk0gL85Z8bDZv18vfsbIXSy890Nm/uYW4uHl4eHn12vw8tvwWFdLheMiTopjFFViX/5zb+acH9pzilCdrZlWcKj1pr74Fvw62ubpMhayzm/wlX1NQxrmia0f2orhvbb7cOPuiBo98hw6uHlc9gnBp0K7VfbGsUk2q1zN9a5LLMvld03Y4yiyTq15pQrEq1zb+pSFOwr2H8zWkt6WO0rwJLE62UwZy7+Ul6W9xDcVdaKxgDrUyFwtF6MqQHOv6dstCSH4NYFADdCetvL4hrGKKnPzX+Uk3V2biUEy+iy8OIGE4xUfb7CSygCZK/KRrLjetEa3ELwpkG5ymlIn6YpyzIp5fPzs4OTJJbqdCvJ2WYpwKaRrnPLBFkaJZLk8NK2gE3WwjYYvg0Ax2NSlrxt2+DK2QbYM4KCshmbiqQH0BRCYoztDa6qqmmaYRiEEEqpMCQyw+6EQJkl0LCpPdH0oM3YdR3A8zxfYbhgHr3gmFPEhRrH0dl+G81ZOPjduqPy3Q7MhzKMPuz2ggYGmLIcAkEBNhpmw2UxrttFFuCiKD7gm3Lf99vttq5raAEniWNelLc9uHPm+X3lALtSpfTBIDP4h2ZgBIwn2IagvCrD/gBDsMnzHA4WHqAZ4dfvu46Dbdv1knEUrXaAZJyhADPGQplZlm3AJyEEMIRQFEWQD4L9718iwzSJ4qfHKsMs2R3jfVGUUPBut6OUQhDH8R+xied4RDRhLQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"A sample bar graph\"\n        title=\"\"\n        src=\"/static/dc4406bb965d19b27a416a4ad4c1bdbc/4dcb9/largest_rectangle.png\"\n        srcset=\"/static/dc4406bb965d19b27a416a4ad4c1bdbc/4dcb9/largest_rectangle.png 188w\"\n        sizes=\"(max-width: 188px) 100vw, 188px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Here, the largest triangle is shown above with an area of 10 (2x5).</p>\n<p><strong>Claim</strong>: Our answer will include at least one “entire bar”.</p>\n<p><strong>Proof</strong>: Counter example, say we have an answer that doesn’t include any entire bar. </p>\n<p>The height bound of the rectangle is the maximum height of the bars it includes.\nWe don’t have any entire bars which means we are at least 1 unit less than the maximum.\nThe rectangle that contains this entire bar is also valid and has a larger area.\nThus, the original answer is incorrect.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e4c4df099c63e8df5087b2d855782734/2bf95/largest_rectangle_counter_proof.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 194px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 107.21649484536083%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsSAAALEgHS3X78AAACGUlEQVQ4y5WT2ZKbMBBF/f+flqeZOGA2s4lFEhKLwIAxNrkgx5VyPBWPHlQS9FHf3nbLF+t2u2FvlSJJ8rg+rd1XpLZmjH58fn4bxl6WJSFECBGGYdu2/z6xe4n5R4/xQgpxOp1wbZqmKIp34SxNeVFkWfaApZT/gfU/6IziuKqq/X7f972G8fEtGAqVUlu22DAM34M555SxaZp834daHBjn78IoT2T9VCy2Pn6kntnQmHjW2zEXvGXhMnc8soYqw6EVafkHnucZWnQjaPj2NywLpvJwOTfsaPRFsoxKsURKoW1qyU3L1sYvPEt4pivMA2uQ2TJ1it9hJJ/EMUqIXHZdt8JScNV2z/DU8tAeSopDJ/MsJVvOZZqml8uE/CVJssKefUgyisP1er3DLF4uHQudocyXy6krmWsZrucLWdZVBZtxHPM830FJEAQF52hgKNkSxlpGlvnEVs9smfuaEtM00TaWZdV1DRvUf4XR8QhAjwGCGc/nUvCWJ3DII2+oOA6qyHSpsGv47vkBI6Qw8CNCmrpGkZd5YKG7er70LU/FNhgI9RlGS+kfpmGgmUzjl+LpCkfuUAHulKC6w1541jBk67ljNIer5brB8HwdcdWleoYxA1q23NY6GJyhsMgTDew15qlVjKDttLpqyzYShgTtMLG2bYN3twXZ1sE8HvZFGln7j9g9cBIEtmE7Dmwcx/E8j1KK0uCh327DsBX4ZraFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"counter example\"\n        title=\"\"\n        src=\"/static/e4c4df099c63e8df5087b2d855782734/2bf95/largest_rectangle_counter_proof.png\"\n        srcset=\"/static/e4c4df099c63e8df5087b2d855782734/2bf95/largest_rectangle_counter_proof.png 194w\"\n        sizes=\"(max-width: 194px) 100vw, 194px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><strong>Algorithm</strong>: At each <em>i</em>, we get the answer using this entire bar at <em>i</em>. We need the first element less than <em>i</em> to the left and the first element less than <em>i</em> to the right. That gives us the span (width) of this answer. The height of this answer is simply <em>i</em>. We multiply to find the answer.</p>\n<h2>Monotonic Queue</h2>\n<p>A monotonic queue is a data structure that preserves a monotonic sequence. </p>\n<p>In early calculus, you learn about monotonically increasing or decreasing functions:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aeb1859691cbd10c3b683a1dd9a99121/5d030/mono_functions.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 771px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 36.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABFklEQVQY0y1PiY6DIBDl/3+waamK7a5RFBEQD67Zp9kJCbxjHjOMv3nOOYSQczyPOE47UXk+G60PohRCRJ3nmVJ4PGrnYikppQiPtY4ty0JEOYMj70mpAEEpN88XkzNESikjAaS1FzzP4hzMns1aA2tdcIPCCKVAM94XxCpFMSIi43NjDGAphFxjaBw9M3bZd7K20F0YEs0WuFxMCMj9b3bOHgdJeZkxkZSe/XYKMnrSXc45WLHLtWtM2HD1pe89mrVeck7HkcAjt6oU+35/ZqVwpmnq+14IAQEPKeU0qUHKcZRV1SBxGICk1mq8q65r5tf1035EI/jr1QixYwciawxSRNOA5O9qu8lt27qua1vBOReixZh/jaaPO+xL+csAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"mono functions\"\n        title=\"\"\n        src=\"/static/aeb1859691cbd10c3b683a1dd9a99121/5d030/mono_functions.png\"\n        srcset=\"/static/aeb1859691cbd10c3b683a1dd9a99121/8ff5a/mono_functions.png 240w,\n/static/aeb1859691cbd10c3b683a1dd9a99121/e85cb/mono_functions.png 480w,\n/static/aeb1859691cbd10c3b683a1dd9a99121/5d030/mono_functions.png 771w\"\n        sizes=\"(max-width: 771px) 100vw, 771px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>This is essentially what we are trying to preserve. In most cases we also want strictly increasing or decreasing.</p>\n<p>A general structure can be:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">MonotonicQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Item</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Item</span> item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Item</span> <span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Item</span> <span class=\"token function\">peek</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Back to Trapping Rain Water</h2>\n<p>We can implement this algorithm with two monotonic queues. One to find maximum to the left, one to find maximum to the right.\nFor simplicity, we’re going to work with int’s here as we only care about the indices (we can get the heights from the array in O(1) so no need to store).</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MaxToLeft</span><span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> processedItems<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MaxToLeft</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> items<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>processedItems <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">int</span> maxSoFar <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span>MIN_VALUE<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            maxSoFar <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> maxSoFar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            processedItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> maxSoFar<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">int</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> processedItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And similarily:\n<br>\n<sub><sup>Note: in this case we could have simply re-used <code class=\"language-text\">MaxToLeft</code> and reversed our input. But for clarify, it is explicitly given.</sup></sub></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MaxToRight</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> processedItems<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MaxToRight</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> items<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>processedItems <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">int</span> maxSoFar <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span>MIN_VALUE<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> items<span class=\"token punctuation\">.</span>length<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            maxSoFar <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> maxSoFar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            processedItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> maxSoFar<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">int</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> processedItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And finally, the algorithm:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">trap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> height<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">MaxToLeft</span> maxToLeft <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxToLeft</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MaxToRight</span> maxToRight <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxToRight</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">int</span> totalWaterTrapped <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> height<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">int</span> waterTrappedHere <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>maxToLeft<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> maxToRight<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> height<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            totalWaterTrapped <span class=\"token operator\">+=</span> waterTrappedHere<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> totalWaterTrapped<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<details>\n    <summary>Full leetcode compatible solution</summary>\n    \nCode that you can paste into LeetCode:\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Solution</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">trap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> height<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">MaxToLeft</span> maxToLeft <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxToLeft</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">MaxToRight</span> maxToRight <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaxToRight</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n            <span class=\"token keyword\">int</span> totalWaterTrapped <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> height<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">int</span> waterTrappedHere <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>maxToLeft<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> maxToRight<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> height<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                totalWaterTrapped <span class=\"token operator\">+=</span> waterTrappedHere<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n    \n            <span class=\"token keyword\">return</span> totalWaterTrapped<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">MaxToLeft</span><span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> processedItems<span class=\"token punctuation\">;</span>\n    \n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">MaxToLeft</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> items<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>processedItems <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \n            <span class=\"token keyword\">int</span> maxSoFar <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span>MIN_VALUE<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                maxSoFar <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> maxSoFar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                processedItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> maxSoFar<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    \n        <span class=\"token keyword\">int</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> processedItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">MaxToRight</span><span class=\"token punctuation\">{</span>\n    \n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> processedItems<span class=\"token punctuation\">;</span>\n    \n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">MaxToRight</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> items<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>processedItems <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">[</span>items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \n            <span class=\"token keyword\">int</span> maxSoFar <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span>MIN_VALUE<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> items<span class=\"token punctuation\">.</span>length<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                maxSoFar <span class=\"token operator\">=</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> maxSoFar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                processedItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> maxSoFar<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    \n        <span class=\"token keyword\">int</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> processedItems<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token punctuation\">}</span></code></pre></div>\n</details>\n<h1>Largest Rectangle</h1>\n<p>The largest rectangle is left as an exercise :) </p>","fields":{"tagSlugs":["/tags/algorithms/","/tags/monotonic-queue/","/tags/leet-code/"],"slug":"/posts/monotonic-queue-largest-rectangle/"},"frontmatter":{"title":"Monotonic Queue and Largest Rectangle in Bar Graph Problems","tags":["Algorithms","Monotonic Queue","LeetCode"],"date":"2020-12-28T22:40:32.169Z","description":"Using Monotonic queues to solve problems"}}},"pageContext":{"slug":"/posts/monotonic-queue-largest-rectangle/"}},"staticQueryHashes":[]}